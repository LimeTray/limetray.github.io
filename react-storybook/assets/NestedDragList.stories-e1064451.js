import{j as o}from"./jsx-runtime-8406ef1e.js";import{r as v}from"./index-ad58220e.js";import{D as H,C as N,P as M}from"./react-beautiful-dnd.esm-970fb784.js";import{d as u,o as V}from"./styled-components.browser.esm-d2d81691.js";import{t as W}from"./config-ec09094b.js";import"./_commonjsHelpers-de833af9.js";import"./inheritsLoose-5494d9cc.js";import"./extends-4c19d496.js";import"./toPropertyKey-4015efc6.js";import"./index-4fee7e45.js";import"./tiny-invariant-dd7d57d2.js";import"./objectWithoutPropertiesLoose-f3b3ace0.js";const L=e=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:10,height:15,fill:"none",...e,children:o.jsx("path",{fill:"#D1D5DB",d:"M4.167 12.503c0 .916-.75 1.666-1.666 1.666-.917 0-1.667-.75-1.667-1.666 0-.917.75-1.667 1.667-1.667.916 0 1.666.75 1.666 1.667ZM2.501 5.836c-.917 0-1.667.75-1.667 1.667 0 .916.75 1.666 1.667 1.666.916 0 1.666-.75 1.666-1.666 0-.917-.75-1.667-1.666-1.667Zm0-5c-.917 0-1.667.75-1.667 1.667 0 .916.75 1.666 1.667 1.666.916 0 1.666-.75 1.666-1.666 0-.917-.75-1.667-1.666-1.667Zm5 3.333c.916 0 1.666-.75 1.666-1.666 0-.917-.75-1.667-1.666-1.667-.917 0-1.667.75-1.667 1.667 0 .916.75 1.666 1.667 1.666Zm0 1.667c-.917 0-1.667.75-1.667 1.667 0 .916.75 1.666 1.667 1.666.916 0 1.666-.75 1.666-1.666 0-.917-.75-1.667-1.666-1.667Zm0 5c-.917 0-1.667.75-1.667 1.667 0 .916.75 1.666 1.667 1.666.916 0 1.666-.75 1.666-1.666 0-.917-.75-1.667-1.666-1.667Z"})});L.__docgenInfo={description:"",methods:[],displayName:"DragIcon"};const w=u.div`
  transition: all 0.2s ease;
  min-height: ${e=>e.isdraggingover?"50px":"auto"};
  background-color: ${e=>e.isdraggingover?e.theme.colors.backgroundSecondary:"transparent"};
  border: 2px dashed ${e=>e.isdraggingover?e.theme.colors.border:"transparent"};
`,z=u.div`
  border-bottom: ${e=>e.isChild?"none":`1px solid ${e.theme.colors.border}`};
  &:last-child {
    border-bottom: none;
  }
  border-left: ${e=>e.isChild?`2px solid ${e.theme.colors.border}`:"none"};
  margin: ${({theme:e})=>e.margins.small} 0;
  margin-left: ${e=>e.depth*2*parseInt(e.theme.spacing.md)}px;
  background-color: ${e=>e.isDragging?e.theme.colors.border:"white"};
  box-shadow: ${e=>e.isDragging?e.theme.shadows.medium:"none"};
  cursor: ${e=>e.isDragDisabled?"not-allowed":"grab"};
`,F=u.div`
  display: flex;
  align-items: center;
  padding: ${({theme:e})=>`${e.padding.small} ${e.padding.small} ${e.padding.small} ${e.padding.medium}`};
`,G=u.div`
  margin-right: ${({theme:e})=>e.spacing.sm};
  display: flex;
  align-items: center;
  cursor: move;
`,P=({items:e,onItemsChange:I,maxNestingLevel:b=1})=>{const[p,f]=v.useState(e);v.useEffect(()=>{f(e)},[e]);const E=s=>{const{source:n,destination:t,draggableId:r}=s;if(!t)return;const m=A(p,n,t,r);f(m),I&&I(m)},A=(s,n,t,r)=>{const a=h(s).find(i=>i.id===r);if(!a)return s;let d=y([...s],r);if(t.droppableId==="root")d.splice(t.index,0,a);else{const i=D(d,t.droppableId);if(i)if(i.subItems||(i.subItems=[]),T(i)<=b&&(a.subItems===void 0||a.subItems.length===0))i.subItems.splice(t.index,0,a);else{const O=d.findIndex(B=>B.id===i.id);d.splice(O+1,0,a)}else d=s}return d},T=s=>{let n=0,t=s;for(;t.subItems&&t.subItems.length>0;)n++,t=t.subItems[0];return n},h=s=>s.reduce((n,t)=>(n.push(t),t.subItems&&n.push(...h(t.subItems)),n),[]),y=(s,n)=>s.reduce((t,r)=>{if(r.id!==n){const m={...r};r.subItems&&(m.subItems=y(r.subItems,n)),t.push(m)}return t},[]),D=(s,n)=>{for(const t of s){if(t.id===n)return t;if(t.subItems){const r=D(t.subItems,n);if(r)return r}}return null},S=(s,n,t=0)=>o.jsx(M,{draggableId:s.id,index:n,isDragDisabled:s.isDragDisabled,children:(r,m)=>o.jsxs(z,{ref:r.innerRef,...r.draggableProps,isDragging:m.isDragging,depth:t,isChild:t>0,isDragDisabled:!!s.isDragDisabled,style:{...r.draggableProps.style,...s.customItemStyle},children:[o.jsxs(F,{children:[!s.isDragDisabled&&o.jsx(G,{...r.dragHandleProps,children:o.jsx(L,{})}),s.content]}),t<b&&o.jsx(N,{droppableId:s.id,type:"nested",children:(a,d)=>o.jsxs(w,{ref:a.innerRef,isdraggingover:d.isDraggingOver,...a.droppableProps,children:[s.subItems&&s.subItems.map((i,x)=>S(i,x,t+1)),a.placeholder]})})]})},s.id);return o.jsx(V,{theme:W,children:o.jsx(H,{onDragEnd:E,children:o.jsx("div",{children:o.jsx(N,{droppableId:"root",type:"nested",children:(s,n)=>o.jsxs(w,{ref:s.innerRef,isdraggingover:n.isDraggingOver,...s.droppableProps,children:[p.map((t,r)=>S(t,r)),s.placeholder]})})})})})},_=P;P.__docgenInfo={description:"",methods:[],displayName:"NestedDragList",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  content: ReactNode;
  subItems?: NestedItem[];
  isDragDisabled?: boolean;
  customItemStyle?: React.CSSProperties;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"content",value:{name:"ReactNode",required:!0}},{key:"subItems",value:{name:"Array",elements:[{name:"NestedItem"}],raw:"NestedItem[]",required:!1}},{key:"isDragDisabled",value:{name:"boolean",required:!1}},{key:"customItemStyle",value:{name:"ReactCSSProperties",raw:"React.CSSProperties",required:!1}}]}}],raw:"NestedItem[]"},description:""},onItemsChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(items: NestedItem[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  content: ReactNode;
  subItems?: NestedItem[];
  isDragDisabled?: boolean;
  customItemStyle?: React.CSSProperties;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"content",value:{name:"ReactNode",required:!0}},{key:"subItems",value:{name:"Array",elements:[{name:"NestedItem"}],raw:"NestedItem[]",required:!1}},{key:"isDragDisabled",value:{name:"boolean",required:!1}},{key:"customItemStyle",value:{name:"ReactCSSProperties",raw:"React.CSSProperties",required:!1}}]}}],raw:"NestedItem[]"},name:"items"}],return:{name:"void"}}},description:""},maxNestingLevel:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}}}};const ie={title:"NestedDragList",component:_},J=[{id:"1",content:"item 1 content",subItems:[{id:"10",content:"SubItem 10 content",customItemStyle:{}},{id:"11",content:"SubItem 11 content",customItemStyle:{}}],customItemStyle:{}},{id:"2",content:"item 2 content",subItems:[{id:"20",content:"SubItem 20 content"},{id:"21",content:"SubItem 21 content"}]},{id:"3",content:"item 3 content",subItems:[{id:"30",content:"SubItem 30 content"},{id:"31",content:"SubItem 31 content",customItemStyle:{}}]},{id:"4",content:"item 4 content",subItems:[]},{id:"5",content:o.jsx("div",{style:{color:"red"},children:"item 5 content"}),isDragDisabled:!0,subItems:[]}],g=[{id:"1",content:"item 1 content",subItems:[{id:"10",content:"SubItem 10 content",customItemStyle:{}},{id:"11",content:"SubItem 11 content",customItemStyle:{}}],customItemStyle:{}},{id:"2",content:"item 2 content",subItems:[{id:"20",content:"SubItem 20 content"},{id:"21",content:"SubItem 21 content"}]},{id:"3",content:"item 3 content",subItems:[{id:"30",content:"SubItem 30 content"},{id:"31",content:"SubItem 31 content",customItemStyle:{}}]},{id:"4",content:"item 4 content",subItems:[]},{id:"5",content:o.jsx("div",{style:{color:"red"},children:"item 5 content"}),isDragDisabled:!0,subItems:[]}];g[0].customItemStyle={border:"1px dashed blue"};g[0].subItems[1].customItemStyle={border:"1px dashed green"};const Z=e=>o.jsx(_,{...e}),c=Z.bind({});c.args={items:J,maxNestingLevel:1,onItemsChange:e=>{console.log("Items changed:",e)}};const l=Z.bind({});l.args={items:g,maxNestingLevel:1,onItemsChange:e=>{console.log("Items changed:",e)}};var j,$,C;c.parameters={...c.parameters,docs:{...(j=c.parameters)==null?void 0:j.docs,source:{originalSource:"(args: any) => <NestedDragList {...args} />",...(C=($=c.parameters)==null?void 0:$.docs)==null?void 0:C.source}}};var R,k,q;l.parameters={...l.parameters,docs:{...(R=l.parameters)==null?void 0:R.docs,source:{originalSource:"(args: any) => <NestedDragList {...args} />",...(q=(k=l.parameters)==null?void 0:k.docs)==null?void 0:q.source}}};const me=["Default","CustomItemStyle"];export{l as CustomItemStyle,c as Default,me as __namedExportsOrder,ie as default};

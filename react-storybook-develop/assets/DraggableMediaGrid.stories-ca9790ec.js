import{j as s}from"./jsx-runtime-8406ef1e.js";import{r as f}from"./index-ad58220e.js";import{G as c}from"./Grid-941c6d0d.js";import{B as ce}from"./Button-13ce16b7.js";import{I as ue}from"./Icon-33b7fdc8.js";import{I as pe}from"./Label-32ef75b5.js";import{I,D as ge}from"./ImageAdd-ac6e726d.js";import"./_commonjsHelpers-de833af9.js";import"./extends-4c19d496.js";import"./getElementType-ff0d42f5.js";import"./factories-f5adea19.js";import"./inheritsLoose-5494d9cc.js";import"./childrenUtils-dd3b0ba5.js";import"./map-20538cdf.js";import"./Ref-51c42093.js";import"./objectWithoutPropertiesLoose-f3b3ace0.js";import"./index-4fee7e45.js";import"./ModernAutoControlledComponent-fe68b7fb.js";import"./assertThisInitialized-081f9914.js";import"./htmlPropsUtils-9497f5af.js";import"./includes-646822e3.js";import"./Portal-25fcd847.js";const he=["mp4","webm","ogg","mov","3gp","3g2","m4v","mkv"],G=["video/mp4","video/webm","video/ogg"],V=["image/jpeg","image/png","image/webp"],ye=r=>{var m;const l=(m=r.split(".").pop())==null?void 0:m.toLowerCase();return he.includes(l||"")?"video":"image"},K=({showAddButton:r=!0,initialMedia:l,onUpdateMedia:m=()=>{},noOfColumns:D=6,draggable:M=!0,onAddMedia:j=()=>{}})=>{const[v,d]=f.useState(l),[Y,N]=f.useState(null),[n,S]=f.useState(null);f.useEffect(()=>{d(l)},[l]);const ee=e=>()=>{S(e)},k=e=>{e.preventDefault()},se=e=>a=>{if(n!==null){const t=[...v],[i]=t.splice(n,1);t.splice(e,0,i),d(t),m(t),S(null),a.currentTarget.classList.remove("dragging-over")}},ae=e=>{e.preventDefault();const a=e.dataTransfer.files;if(a&&a.length){const t=a[0],i=G.includes(t.type),_=V.includes(t.type);if(!i&&!_){console.error("Invalid file type");return}if(t instanceof Blob){const w=URL.createObjectURL(t);d(C=>[...C,{url:w,isDisabled:!1,type:i?"video":"image"}]),j(t)}}},re=e=>()=>{const a=v.filter((t,i)=>i!==e);d(a),m(a)},te=e=>()=>{N(e)},ie=()=>{N(null)},x=()=>{const e=document.createElement("input");e.type="file",e.accept="image/*,video/*",e.multiple=!1,e.onchange=a=>{const t=a.target.files;if(t&&t.length){const i=t[0],_=G.includes(i.type),w=V.includes(i.type);if(!_&&!w){console.error("Invalid file type");return}if(i instanceof Blob){const C=URL.createObjectURL(i);d(ne=>[...ne,{url:C,isDisabled:!1,type:_?"video":"image"}]),j(i)}}},e.click()},oe=e=>a=>{n!==null&&n!==e&&a.currentTarget.classList.add("dragging-over")},le=e=>{e.currentTarget.classList.remove("dragging-over")},me=(e,a)=>(e.type||ye(e.url))==="video"?s.jsx("video",{className:"media",src:e.url,controls:!0,playsInline:!0,preload:"metadata","data-testid":`media-grid-item-${a}`}):s.jsx(pe,{src:e.url||"",className:"media",size:"small",loading:"lazy",wrapped:!1,ui:!0,"data-testid":`media-grid-item-${a}`});if(v.length===0&&r)return s.jsx(c,{doubling:!0,columns:1,className:"lt-media-grid",padded:!0,children:s.jsx(c.Column,{className:"media-grid-column",textAlign:"center",children:s.jsxs("div",{className:"upload-container",id:"dropZone",onClick:x,children:[s.jsx("div",{className:"upload-icon",children:s.jsx(I,{})}),s.jsxs("div",{className:"upload-text",children:["Upload a file ",s.jsx("b",{children:"or drag and drop"})]}),s.jsx("div",{className:"upload-subtext",children:"PNG, JPG, MP4 up to 10MB"})]})},"addButton")});const de=D<=16?D:16;return s.jsxs(c,{doubling:!0,columns:de,className:"lt-media-grid",padded:!0,children:[r&&s.jsx(c.Column,{className:"media-grid-column",textAlign:"center",children:s.jsxs("div",{className:"upload-container",onDrop:ae,onDragOver:k,id:"dropZone",onClick:x,children:[s.jsx("div",{className:"upload-icon",children:s.jsx(I,{})}),s.jsxs("div",{className:"upload-text",children:["Upload a file ",s.jsx("b",{className:"drag-drop",children:"or drag and drop"})]}),s.jsx("div",{className:"upload-subtext",children:"PNG, JPG, MP4 up to 10MB"})]})},"addButton"),v.map((e,a)=>s.jsxs(c.Column,{className:"media-grid-column",children:[s.jsx("div",{className:"delete-icon",onClick:re(a),children:s.jsx(ge,{className:"delete-button"})}),s.jsxs("div",{className:M?`media-grid-item ${n===a?"dragging":""}`:"draggable-media-grid-item",onMouseEnter:te(a),onMouseLeave:ie,onDragOver:k,onDrop:se(a),onDragEnter:oe(a),onDragLeave:le,children:[me(e,a),M&&Y===a&&s.jsx("div",{className:"overlay",children:s.jsx("div",{className:"button-group-div",children:s.jsx(ce,{circular:!0,icon:s.jsx(ue,{name:"arrows alternate",color:"black"}),draggable:!0,onDragStart:ee(a),className:"media-action-button drag-button"})})})]})]},a))]})},Q=K;K.__docgenInfo={description:"",methods:[],displayName:"DraggableMediaGrid",props:{showAddButton:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},initialMedia:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  url: string;
  type?: MediaType;
  isDisabled?: boolean;
}`,signature:{properties:[{key:"url",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'image' | 'video'",elements:[{name:"literal",value:"'image'"},{name:"literal",value:"'video'"}],required:!1}},{key:"isDisabled",value:{name:"boolean",required:!1}}]}}],raw:"MediaItem[]"},description:""},onUpdateMedia:{required:!1,tsType:{name:"signature",type:"function",raw:"(media: MediaItem[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  url: string;
  type?: MediaType;
  isDisabled?: boolean;
}`,signature:{properties:[{key:"url",value:{name:"string",required:!0}},{key:"type",value:{name:"union",raw:"'image' | 'video'",elements:[{name:"literal",value:"'image'"},{name:"literal",value:"'video'"}],required:!1}},{key:"isDisabled",value:{name:"boolean",required:!1}}]}}],raw:"MediaItem[]"},name:"media"}],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},noOfColumns:{required:!1,tsType:{name:"union",raw:"SemanticWIDTHS | 'equal'",elements:[{name:"SemanticWIDTHS"},{name:"literal",value:"'equal'"}]},description:"",defaultValue:{value:"6",computed:!1}},draggable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},onAddMedia:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: any) => void",signature:{arguments:[{type:{name:"any"},name:"file"}],return:{name:"void"}}},description:"",defaultValue:{value:"() => {}",computed:!1}}}};const Ee={title:"DraggableMediaGrid",component:Q},o=r=>s.jsx(Q,{...r}),u=o.bind({});u.args={initialMedia:[{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699274534_ChickenChilliGarlicNoodlesServes2.webp"},{url:"https://s3-ap-southeast-1.amazonaws.com/www.limetray.com/test/+1672_burger_king/product_+2/1742804592391_dummy_portrait.mp4"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699274950_ClassicFriedRiceServes2.webp"},{url:"https://04d6cee8-ab07-48f8-9420-c7598bb5e9e9.mdnplay.dev/shared-assets/videos/flower.webm"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699275016_VegChilliGarlicFriedRiceServes2.webp"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699275038_ChickenFriedRiceServes2.webp"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1667214190_ClassicVegDoublePattyBurger.jpg"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1660235092_1655206550Crispychicken.jpg"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1675526671_1667214223ClassicVegDoublePattyBurger.jpg"}],onUpdateMedia:r=>console.log(r)};const p=o.bind({});p.args={noOfColumns:4,initialMedia:[{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699274534_ChickenChilliGarlicNoodlesServes2.webp"},{url:"https://s3-ap-southeast-1.amazonaws.com/www.limetray.com/test/+1672_burger_king/product_+2/1742804592391_dummy_portrait.mp4"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699274950_ClassicFriedRiceServes2.webp"},{url:"https://04d6cee8-ab07-48f8-9420-c7598bb5e9e9.mdnplay.dev/shared-assets/videos/flower.webm"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699275016_VegChilliGarlicFriedRiceServes2.webp"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699275038_ChickenFriedRiceServes2.webp"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1667214190_ClassicVegDoublePattyBurger.jpg"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1660235092_1655206550Crispychicken.jpg"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1675526671_1667214223ClassicVegDoublePattyBurger.jpg"}],onUpdateMedia:r=>console.log(r)};const g=o.bind({});g.args={noOfColumns:5,showAddImageButton:!1,initialMedia:[{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699274534_ChickenChilliGarlicNoodlesServes2.webp"},{url:"https://s3-ap-southeast-1.amazonaws.com/www.limetray.com/test/+1672_burger_king/product_+2/1742804592391_dummy_portrait.mp4"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699274950_ClassicFriedRiceServes2.webp"},{url:"https://04d6cee8-ab07-48f8-9420-c7598bb5e9e9.mdnplay.dev/shared-assets/videos/flower.webm"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699275016_VegChilliGarlicFriedRiceServes2.webp"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699275038_ChickenFriedRiceServes2.webp"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1667214190_ClassicVegDoublePattyBurger.jpg"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1660235092_1655206550Crispychicken.jpg"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1675526671_1667214223ClassicVegDoublePattyBurger.jpg"}],onUpdateMedia:r=>console.log(r)};const h=o.bind({});h.args={noOfColumns:5,draggable:!1,initialMedia:[{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699274534_ChickenChilliGarlicNoodlesServes2.webp"},{url:"https://s3-ap-southeast-1.amazonaws.com/www.limetray.com/test/+1672_burger_king/product_+2/1742804592391_dummy_portrait.mp4"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699274950_ClassicFriedRiceServes2.webp"},{url:"https://04d6cee8-ab07-48f8-9420-c7598bb5e9e9.mdnplay.dev/shared-assets/videos/flower.webm"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699275016_VegChilliGarlicFriedRiceServes2.webp"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1699275038_ChickenFriedRiceServes2.webp"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1667214190_ClassicVegDoublePattyBurger.jpg"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1660235092_1655206550Crispychicken.jpg"},{url:"https://assets.limetray.com/assets/user_images/menus/compressed/1675526671_1667214223ClassicVegDoublePattyBurger.jpg"}],onUpdateMedia:r=>console.log(r)};const y=o.bind({});y.args={noOfColumns:6,initialMedia:[]};const b=o.bind({});b.args={noOfColumns:5,draggable:!1,initialMedia:[{url:"https://s3-ap-southeast-1.amazonaws.com/www.limetray.com/test/+1672_burger_king/product_+2/1742804592391_dummy_portrait.mp4"},{url:"https://04d6cee8-ab07-48f8-9420-c7598bb5e9e9.mdnplay.dev/shared-assets/videos/flower.webm"},{url:"https://s3-ap-southeast-1.amazonaws.com/www.limetray.com/test/+1672_burger_king/product_+2/1742804592391_dummy_portrait.mp4"},{url:"https://04d6cee8-ab07-48f8-9420-c7598bb5e9e9.mdnplay.dev/shared-assets/videos/flower.webm"},{url:"https://s3-ap-southeast-1.amazonaws.com/www.limetray.com/test/+1672_burger_king/product_+2/1742804592391_dummy_portrait.mp4"},{url:"https://04d6cee8-ab07-48f8-9420-c7598bb5e9e9.mdnplay.dev/shared-assets/videos/flower.webm"}],onUpdateMedia:r=>console.log(r)};var T,B,O;u.parameters={...u.parameters,docs:{...(T=u.parameters)==null?void 0:T.docs,source:{originalSource:"(args: any) => <DraggableMediaGrid {...args} />",...(O=(B=u.parameters)==null?void 0:B.docs)==null?void 0:O.source}}};var R,P,q;p.parameters={...p.parameters,docs:{...(R=p.parameters)==null?void 0:R.docs,source:{originalSource:"(args: any) => <DraggableMediaGrid {...args} />",...(q=(P=p.parameters)==null?void 0:P.docs)==null?void 0:q.source}}};var E,L,F;g.parameters={...g.parameters,docs:{...(E=g.parameters)==null?void 0:E.docs,source:{originalSource:"(args: any) => <DraggableMediaGrid {...args} />",...(F=(L=g.parameters)==null?void 0:L.docs)==null?void 0:F.source}}};var U,W,z;h.parameters={...h.parameters,docs:{...(U=h.parameters)==null?void 0:U.docs,source:{originalSource:"(args: any) => <DraggableMediaGrid {...args} />",...(z=(W=h.parameters)==null?void 0:W.docs)==null?void 0:z.source}}};var A,$,H;y.parameters={...y.parameters,docs:{...(A=y.parameters)==null?void 0:A.docs,source:{originalSource:"(args: any) => <DraggableMediaGrid {...args} />",...(H=($=y.parameters)==null?void 0:$.docs)==null?void 0:H.source}}};var J,Z,X;b.parameters={...b.parameters,docs:{...(J=b.parameters)==null?void 0:J.docs,source:{originalSource:"(args: any) => <DraggableMediaGrid {...args} />",...(X=(Z=b.parameters)==null?void 0:Z.docs)==null?void 0:X.source}}};const Le=["WithCustomMedia","WithCustomNoOfColumns","WithoutAddImageButton","notDraggable","WithoutMedia","onlyVideos"];export{u as WithCustomMedia,p as WithCustomNoOfColumns,g as WithoutAddImageButton,y as WithoutMedia,Le as __namedExportsOrder,Ee as default,h as notDraggable,b as onlyVideos};
